<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Robbie Gym">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="manifest" href="manifest.json">
  <title>Boxing for Fitness</title>
  <style>
    :root {
      --pad: clamp(10px, 2vmin, 18px);
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --bg: #0b0b0d;
      --card: #121316;
      --text: #f9fafb;
      --muted: #a3a3a3;
      --accent: #ef4444;
      --line: #2a2b31;
    }
    * { box-sizing: border-box; }
    html, body {height:100%; margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;}
    body {background: var(--bg); color: var(--text); -webkit-tap-highlight-color: transparent;}
    .wrap {max-width: 1100px; margin: 0 auto; padding: calc(var(--pad) * 2) var(--pad);}
    header {display:flex; flex-wrap:wrap; gap:10px; justify-content:space-between; align-items:center; margin-bottom: calc(var(--pad) * 1.5);}
    h1 {font-size: clamp(22px, 4.2vw, 34px); margin:0;}
    .muted {color: var(--muted); font-size: .95rem;}
    nav {display:flex; gap:8px; flex-wrap: wrap;}
    nav button {border:1px solid var(--line); background: #15161a; color: var(--text); border-radius: 999px; padding: 10px 14px; cursor:pointer;}
    nav button.active {background: var(--accent); border-color: var(--accent); color: white;}

    .card {background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); padding: calc(var(--pad) * 1.2); border: 1px solid var(--line);}
    .grid {display:grid; gap: var(--pad);}
    .row {display:flex; gap: var(--pad); flex-wrap: wrap; align-items: center;}
    input, select, textarea {width:100%; background:#0e0f12; color: var(--text); border:1px solid var(--line); border-radius:12px; padding:12px 12px; outline:none;}
    label {font-size:.9rem; color: var(--muted);}
    .btn {border:0; border-radius: 12px; padding: 12px 16px; font-size: 1rem; cursor:pointer; background: var(--accent); color:white; box-shadow: var(--shadow);}
    .btn.secondary {background:#23252b; color: var(--text);}
    .btn.ghost {background:transparent; border:1px solid var(--line);}
    .btn.sm {padding:8px 12px; font-size:.95rem;}
    table {width:100%; border-collapse: collapse; font-size:.98rem;}
    th, td {padding: 10px 8px; border-bottom:1px solid var(--line); text-align:left;}
    th {color: var(--muted); font-weight: 600;}
    .chip {display:inline-block; padding: 6px 10px; border-radius:999px; border:1px solid var(--line); background:#14151a;}
    .section-title {margin: 8px 0 14px 0;}
    .hint {font-size:.9rem; color: var(--muted);}
    .toast {position: fixed; left: 50%; transform: translateX(-50%); bottom: 18px; background: #111827; color: white; padding: 10px 14px; border-radius: 999px; display:none;}

    /* timetable columns (Mon→Sat) */
    .day-columns { display: grid; gap: 14px; grid-template-columns: repeat(6, 1fr); align-items: start; }
    @media (max-width: 900px) { .day-columns { grid-template-columns: repeat(2, 1fr); } }
    .day-col { background:#111217; border:1px solid var(--line); border-radius:12px; padding:12px; }
    .day-col h4 { margin:0 0 10px 0; color:#e5e7eb; }
    .session { border:1px solid var(--line); border-radius:12px; padding:10px 12px; background:#0f1014; cursor:pointer; user-select:none; margin-bottom:8px; text-align:center; transition: transform .06s ease, outline-color .12s ease, background .12s ease, border-color .12s ease; }
    .session:hover { outline:2px solid #2a2b31; transform: translateY(-1px); }
    .session.active { outline:2px solid var(--accent); border-color: var(--accent); background: linear-gradient(180deg, #16171d 0%, #111217 100%); box-shadow: 0 6px 18px rgba(239,68,68,.2); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="row" style="align-items:center; gap:12px;">
        <img src="assets/bff-logo.png" alt="Boxing for Fitness" style="height:48px; width:auto;"/>
        <h1>Boxing for Fitness</h1>
      </div>
      <nav>
        <button class="active" data-tab="checkin">Check-in</button>
        <button data-tab="members">Members</button>
        <button data-tab="payments">Payments</button>
        <button data-tab="reports">Reports</button>
        <button id="installBtn" class="ghost">Install</button>
      </nav>
    </header>

    <!-- CHECK-IN -->
    <section id="tab-checkin" class="card">
      <h3 class="section-title">Sessions</h3>
      <div id="sessionGrid" class="day-columns">
        <!-- Columns are static; JS will handle click/active -->
        <div class="day-col"><h4>Monday</h4>
          <div class="session" data-day="Monday" data-time="6:00 AM">6:00 AM</div>
          <div class="session" data-day="Monday" data-time="9:30 AM">9:30 AM</div>
          <div class="session" data-day="Monday" data-time="5:00 PM">5:00 PM</div>
          <div class="session" data-day="Monday" data-time="6:30 PM">6:30 PM</div>
        </div>
        <div class="day-col"><h4>Tuesday</h4>
          <div class="session" data-day="Tuesday" data-time="6:00 AM">6:00 AM</div>
          <div class="session" data-day="Tuesday" data-time="9:30 AM">9:30 AM</div>
          <div class="session" data-day="Tuesday" data-time="5:00 PM">5:00 PM</div>
          <div class="session" data-day="Tuesday" data-time="6:30 PM">6:30 PM</div>
        </div>
        <div class="day-col"><h4>Wednesday</h4>
          <div class="session" data-day="Wednesday" data-time="6:00 AM">6:00 AM</div>
          <div class="session" data-day="Wednesday" data-time="9:30 AM">9:30 AM</div>
          <div class="session" data-day="Wednesday" data-time="5:00 PM">5:00 PM</div>
          <div class="session" data-day="Wednesday" data-time="6:30 PM">6:30 PM</div>
        </div>
        <div class="day-col"><h4>Thursday</h4>
          <div class="session" data-day="Thursday" data-time="6:00 AM">6:00 AM</div>
          <div class="session" data-day="Thursday" data-time="9:30 AM">9:30 AM</div>
          <div class="session" data-day="Thursday" data-time="5:00 PM">5:00 PM</div>
          <div class="session" data-day="Thursday" data-time="6:30 PM">6:30 PM</div>
        </div>
        <div class="day-col"><h4>Friday</h4>
          <div class="session" data-day="Friday" data-time="6:00 AM">6:00 AM</div>
          <div class="session" data-day="Friday" data-time="9:30 AM">9:30 AM</div>
        </div>
        <div class="day-col"><h4>Saturday</h4>
          <div class="session" data-day="Saturday" data-time="8:00 AM">8:00 AM</div>
          <div class="session" data-day="Saturday" data-time="9:30 AM">9:30 AM</div>
        </div>
      </div>

      <div class="row" style="margin-top:14px;">
        <div style="flex:2;">
          <label>Member</label>
          <input list="memberList" id="checkinMember" placeholder="Search name or phone">
          <datalist id="memberList"></datalist>
        </div>
        <div style="flex:1;">
          <label>Selected Session</label>
          <input id="selectedSession" readonly>
        </div>
        <div style="align-self:end;">
          <button id="confirmCheckin" class="btn">Confirm Check-in</button>
        </div>
      </div>
      <div class="hint">Credit automatically deducted (1 per class). If balance is 0, you’ll be prompted to add a pack or single.</div>
    </section>

    <!-- MEMBERS -->
    <section id="tab-members" class="card" style="display:none;">
      <div class="grid" style="grid-template-columns: 1fr 2fr;">
        <div>
          <h3 class="section-title">Add Member</h3>
          <div class="grid">
            <div><label>Full name</label><input id="mName" placeholder="e.g., Alex Smith"></div>
            <div><label>Phone</label><input id="mPhone" placeholder="e.g., 0400 000 000"></div>
            <div><label>Email</label><input id="mEmail" type="email" placeholder="e.g., alex@email.com"></div>
            <div><label>Notes</label><textarea id="mNotes" placeholder="Injuries, level, etc."></textarea></div>
            <button id="addMember" class="btn">Add (+1 free credit)</button>
            <div class="hint">New members start with 1 free credit.</div>
          </div>
        </div>

        <div>
          <h3 class="section-title">Member List</h3>
          <table id="memberTable">
            <thead><tr>
              <th>Name</th><th>Phone</th><th>Email</th><th>Credits</th><th></th><th></th>
            </tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- PAYMENTS -->
    <section id="tab-payments" class="card" style="display:none;">
      <div class="row">
        <div style="flex:2;">
          <label>Member</label>
          <input list="memberList" id="payMember" placeholder="Search name or phone">
        </div>
        <div style="flex:1;">
          <label>Pack</label>
          <select id="payPack">
            <option value="single">Single $20 (1 credit)</option>
            <option value="10">10-Pack $180</option>
            <option value="20">20-Pack $360</option>
          </select>
        </div>
        <div style="align-self:end;">
          <button id="addCredit" class="btn">Apply Payment</button>
        </div>
      </div>
      <h3 class="section-title">Recent Transactions</h3>
      <table id="txTable">
        <thead><tr><th>Date</th><th>Type</th><th>Member</th><th>Amount</th><th>Credits</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- REPORTS -->
    <section id="tab-reports" class="card" style="display:none;">
      <div class="row">
        <button id="exportAttendance" class="btn secondary">Export Attendance CSV</button>
        <button id="exportPayments" class="btn secondary">Export Payments CSV</button>
      </div>
      <div style="margin-top:16px;">
        <h3 class="section-title">Today at a glance</h3>
        <div id="todaySummary" class="muted">No data yet.</div>
      </div>
      <div style="margin-top:16px;">
        <h3 class="section-title">Latest Check-ins</h3>
        <table id="attTable">
          <thead><tr><th>Date</th><th>Session</th><th>Member</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </div>

  <div id="toast" class="toast">Saved</div>

  <script src="app.js"></script>
  <script>
    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
    const isIOS = /iphone|ipad|ipod/i.test(window.navigator.userAgent);
    const installBtn = document.getElementById('installBtn');
    if (!isStandalone && isIOS) installBtn.textContent = 'Add to Home Screen (Share → Add)';
  </script>
</body>
</html>
